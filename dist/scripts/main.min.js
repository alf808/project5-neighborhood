function appOctopus(){function o(){var o=d.getCenter();c=o.lat(),u=o.lng()}function e(o,e){var n=document.createElement("div");n.style.backgroundColor="yellow",n.style.border="2px solid #fff",n.style.borderRadius="3px",n.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",n.style.cursor="pointer",n.style.marginBottom="22px",n.style.marginLeft="5px",n.style.textAlign="center",n.title="Click to recenter the map",o.appendChild(n);var t=document.createElement("div");t.style.color="rgb(25,25,25)",t.style.fontFamily="Roboto,Arial,sans-serif",t.style.fontSize="16px",t.style.lineHeight="38px",t.style.paddingLeft="5px",t.style.paddingRight="5px",t.innerHTML="Center Map",n.appendChild(t),google.maps.event.addDomListener(n,"click",function(){e.setCenter(f)})}function n(){var n=document.getElementById("map-canvas"),i={zoom:13,maxZoom:18,minZoom:9,center:f,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_TOP},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}};d=new google.maps.Map(n,i),a(),o();{var g=document.createElement("div");new e(g,d)}g.index=1,d.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(g);var p=document.getElementById("list");d.controls[google.maps.ControlPosition.TOP_RIGHT].push(p);var c=document.getElementById("pac-input");d.controls[google.maps.ControlPosition.TOP_LEFT].push(c);var u=new google.maps.places.SearchBox(c);google.maps.event.addListener(u,"places_changed",function(){var e=u.getPlaces();l(),m.allPlaces.removeAll();for(var n,t=new google.maps.LatLngBounds,a=0;10>a;a++)void 0!==e[a]&&(n=e[a],r(n),s(n),t.extend(n.geometry.location));d.fitBounds(t),o()}),google.maps.event.addListener(d,"bounds_changed",function(){var o=d.getBounds();u.setBounds(o)});var v=window.setTimeout(t,5e3);google.maps.event.addListener(d,"tilesloaded",function(){window.clearTimeout(v)})}function t(){$("#map-canvas").html("<h1>Google Maps Failed to Load. Please try reloading the page.</h1>")}function a(){var o={location:f,radius:700,types:["meal_takeaway","restaurant","bar","cafe","food"]};p=new google.maps.InfoWindow,g=new google.maps.places.PlacesService(d),g.nearbySearch(o,i)}function i(o,e){e==google.maps.places.PlacesServiceStatus.OK&&(bounds=new google.maps.LatLngBounds,o.forEach(function(o){o.marker=s(o),bounds.extend(new google.maps.LatLng(o.geometry.location.lat(),o.geometry.location.lng()))}),d.fitBounds(bounds),o.forEach(r))}function s(o){var e,n=new google.maps.Marker({map:d,icon:"http://maps.google.com/mapfiles/ms/icons/red-dot.png",name:o.name.toLowerCase(),position:o.geometry.location,place_id:o.place_id,animation:google.maps.Animation.DROP});void 0!==o.vicinity?e=o.vicinity:void 0!==o.formatted_address&&(e=o.formatted_address);var t='<div style="font-weight: bold">'+o.name+"</div><br>"+e+"<br>"+m.foursquareInfo;return google.maps.event.addListener(n,"click",function(){p.setContent(t),p.open(d,this),d.panTo(n.position),n.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){n.setAnimation(null)},1450)}),v.push(n),n}function r(o){var e={};e.place_id=o.place_id,e.position=o.geometry.location.toString(),e.name=o.name;var n;void 0!==o.vicinity?n=o.vicinity:void 0!==o.formatted_address&&(n=o.formatted_address),e.address=n,m.allPlaces.push(e)}function l(){for(var o=0;o<v.length;o++)v[o].setMap(null);v.length=0}var d,g,p,m=this,c="",u="",f=new google.maps.LatLng(21.2790587,-157.81368810000004),v=(new google.maps.LatLngBounds(new google.maps.LatLng(21.271141,-157.821438),new google.maps.LatLng(21.289385,-157.811301)),[]);m.allPlaces=ko.observableArray([]),m.foursquareInfo="",this.getFoursquareInfo=function(o){var e="http://api.foursquare.com/v2/venues/search?ll="+c+","+u+"&oauth_token=GQDPA05ROIS0UO5KO3YQEW4KGYBC2QOW1PCKD0HMQR5COFVH&v=20150830&m=foursquare";$.getJSON(e).done(function(o){m.foursquareInfo="<p>Foursquare:<br>";var e=o.response.venues[0],n=e.name;m.foursquareInfo+=null!==n&&void 0!==n?"Name: "+n+"<br>":"Name: Not Found<br>";var t=e.formattedAddress;m.foursquareInfo+=null!==t&&void 0!==t?"Phone: "+t+"<br>":"Phone: Not Found<br>";var a=e.name;null!==a&&void 0!==a&&(m.foursquareInfo+="twitter: @"+a+"<br>")})},m.clickMarker=function(o){for(var e,n=0;n<v.length;n++)if(o.place_id===v[n].place_id){e=v[n];break}m.getFoursquareInfo(o),d.panTo(e.position),setTimeout(function(){var n='<div style="font-weight: bold">'+o.name+"</div><div>"+o.address+"</div>"+m.foursquareInfo;p.setContent(n),p.open(d,e),e.setAnimation(google.maps.Animation.DROP)},300)},google.maps.event.addDomListener(window,"load",n)}$(function(){ko.applyBindings(new appOctopus)});