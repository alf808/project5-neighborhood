function neighborhoodMapViewModel(){function o(){var o=map.getCenter();p=o.lat(),m=o.lng()}function e(o,e){var n=document.createElement("div");n.className="reset-button",n.title="Click to recenter the map",o.appendChild(n);var t=document.createElement("div");t.className="reset-button-text",t.innerHTML="Center Map",n.appendChild(t),google.maps.event.addDomListener(n,"click",function(){e.setCenter(g)})}function n(){map=new google.maps.Map(v,b),a(),o(),map.controls[google.maps.ControlPosition.TOP_RIGHT].push(r.list);{var n=document.createElement("div");new e(n,map)}n.index=1,map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(n),map.controls[google.maps.ControlPosition.TOP_LEFT].push(u);var i=window.setTimeout(t,8e3);google.maps.event.addListener(map,"tilesloaded",function(){window.clearTimeout(i)})}function t(){$("#map-canvas").html("<h1>Google Maps Failed to Load. Please try reloading the page.</h1>")}function a(){var o={location:g,radius:600,types:["restaurant","cafe","food"]};l=new google.maps.InfoWindow,s=new google.maps.places.PlacesService(map),s.nearbySearch(o,i)}function i(o,e){e==google.maps.places.PlacesServiceStatus.OK&&(bounds=new google.maps.LatLngBounds,o.forEach(function(o){var e=o.geometry.location.lat(),n=o.geometry.location.lng(),t=new c(map,o.name,e,n,o.place_id,o.text);bounds.extend(new google.maps.LatLng(e,n)),r.pins.push(t),d.push(o)}),map.fitBounds(bounds))}var s,l,r=this,p=21.2790587,m=-157.81368810000004,g=new google.maps.LatLng(p,m),d=[];r.pins=ko.observableArray([]),r.foursquareInfo="";var c=function(o,e,n,t,a,i){var s;this.name=ko.observable(e),this.lat=ko.observable(n),this.lon=ko.observable(t),this.text=ko.observable(i),this.pid=ko.observable(a),s=new google.maps.Marker({icon:"img/red-dot.png",position:new google.maps.LatLng(n,t),place_id:a,animation:google.maps.Animation.DROP}),this.isVisible=ko.observable(!1),this.isVisible.subscribe(function(e){s.setMap(e?o:null)}),this.isVisible(!0);var p='<div style="font-weight: bold">'+e+"</div><br>"+r.foursquareInfo;google.maps.event.addListener(s,"click",function(){l.setContent(p),l.open(o,s),o.panTo(s.position)})};r.list=document.getElementById("list");var u=document.getElementById("pac-input"),v=document.getElementById("map-canvas"),b={zoom:14,maxZoom:18,minZoom:9,center:g,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_TOP},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}};r.query=ko.observable(""),r.filterPins=ko.computed(function(){var o=r.query().toLowerCase();return ko.utils.arrayFilter(r.pins(),function(e){var n=e.name().toLowerCase().indexOf(o)>=0;return e.isVisible(n),n})}),r.clickMarker=function(o){var e,n=new google.maps.LatLng(o.lat(),o.lon());console.log(o),console.log(o.name()),e=new google.maps.Marker({icon:"img/red-dot.png",position:n,place_id:o.pid(),animation:google.maps.Animation.DROP}),map.panTo(n);var t='<div style="font-weight: bold">'+o.name()+"</div>";l.setContent(t),l.open(map,e)},google.maps.event.addDomListener(window,"load",n)}var map;ko.applyBindings(new neighborhoodMapViewModel);