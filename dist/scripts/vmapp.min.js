function neighborhoodMapViewModel(){function e(e,o,a){var n=a[1]+"<br>"+a[2]+"<br>"+a[3]+"<br>Rating: "+a[4]+"<br>URL: "+a[5];googname=e;var t="<strong>"+e+"</strong><hr>FOURSQUARE Info:<br>"+n;l.setContent(t),l.open(map,o),o.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){o.setAnimation(null)},1e3)}function o(e,o){var a=document.createElement("div");a.className="reset-button",a.title="Click to recenter the map",e.appendChild(a);var n=document.createElement("div");n.className="reset-button-text",n.innerHTML="Reset Kapahulu Map",a.appendChild(n),google.maps.event.addDomListener(a,"click",function(){o.setCenter(g),o.setZoom(16),l&&l.close(),c.query("")})}function a(){var e=21.2790587,a=-157.81368810000004;g=new google.maps.LatLng(e,a);var i={zoom:16,maxZoom:18,minZoom:10,center:g,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_TOP},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}};map=new google.maps.Map(u,i),t(),map.controls[google.maps.ControlPosition.TOP_LEFT].push(d),map.controls[google.maps.ControlPosition.LEFT_TOP].push(c.list);{var r=document.createElement("div");new o(r,map)}r.index=1,map.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(r);var s=window.setTimeout(n,8e3);google.maps.event.addListener(map,"tilesloaded",function(){window.clearTimeout(s)}),google.maps.event.addListener(map,"click",function(){l.close()})}function n(){$("#map-canvas").html("<h1>Google Maps Failed to Load. Please make sure you have Internet connection and try reloading the page.</h1>")}function t(){l=new google.maps.InfoWindow({maxWidth:150});for(var e=new google.maps.LatLngBounds,o=googleplaces.length,a=0;o>a;a++){var n=googleplaces[a][0],t=googleplaces[a][1],r=googleplaces[a][3],s=googleplaces[a][2],g=new google.maps.LatLng(n,t),p=new m(map,s,n,t,r,g);i(r),e.extend(g),c.pins.push(p),map.fitBounds(e),map.setCenter(e.getCenter())}}function i(e){var o="http://api.foursquare.com/v2/venues/"+e+"?oauth_token=GQDPA05ROIS0UO5KO3YQEW4KGYBC2QOW1PCKD0HMQR5COFVH&v=20150830&m=foursquare&format=json";$.getJSON(o,function(o){r(o,e)}).error(function(e){console.log("oops")})}function r(e,o){var a=e.response.venue;p.push([o,a.contact.formattedPhone||" ",a.location.formattedAddress[0]||" ",a.location.formattedAddress[1]||" ",a.rating||" ",a.url||" "])}function s(e){for(var o,a=p.length,n=0;a>n;n++)if(p[n][0]===e){o=p[n];break}return o}var l,g,c=this,p=[];c.pins=ko.observableArray(),c.query=ko.observable("");var m=function(o,a,n,t,i,r){var l,g=this;g.fsqid=ko.observable(i),g.googlename=ko.observable(a),g.lat=ko.observable(n),g.lon=ko.observable(t),l=new google.maps.Marker({icon:"img/red-dot.png",position:r}),g.marker=ko.observable(l),g.isVisible=ko.observable(!1),g.isVisible.subscribe(function(e){l.setMap(e?o:null)}),g.isVisible(!0),google.maps.event.addListener(l,"click",function(){var n=s(i);o.panTo(r),e(a,l,n)})};c.list=document.getElementById("list");var d=document.getElementById("pac-input"),u=document.getElementById("map-canvas");c.filterPins=ko.computed(function(){var e=c.query().toLowerCase();return ko.utils.arrayFilter(c.pins(),function(o){var a=o.googlename().toLowerCase().indexOf(e)>=0;return o.isVisible(a),a})}),c.clickMarker=function(o){var a=s(o.fsqid()),n=new google.maps.LatLng(o.lat(),o.lon());map.panTo(n),e(o.googlename(),o.marker(),a)},"object"==typeof google&&"object"==typeof google.maps?google.maps.event.addDomListener(window,"load",a):n(),google.maps.event.addDomListener(window,"resize",function(){l&&l.setContent("<strong>"+googname+"</strong><hr>click again for 4square");var e=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(e)})}var googleplaces=[[21.275936,-157.814551,"Rainbow Drive-In","4b058655f964a520ea5c22e3"],[21.280072,-157.814183,"Ono Hawaiian Foods","4b058653f964a5208e5c22e3"],[21.27885,-157.814144,"Side Street Inn","4c4a6bd8c668e21e95f898f8"],[21.2786,-157.81370000000004,"Papa John's Pizza","4bbabd8653649c74406a49fb"],[21.277741,-157.813856,"Uncle Bo's Pupu Bar & Grill","4b058656f964a5206a5d22e3"],[21.281801,-157.81444699999997,"Haili's Hawaiian Food","4b36d86bf964a520543d25e3"],[21.281342,-157.814256,"Yakitori Glad Hawaii","4f24fe9de4b0d10db11500b2"],[21.279026,-157.81379100000004,"Starbucks Coffee","4b05fccbf964a520fae622e3"],[21.280317,-157.81392,"Taco Bell","4d6dbaa732ab5941e5c680b9"],[21.278312,-157.813671,"Zippy's Kapahulu","4aee4eaaf964a52077d321e3"],[21.282899,-157.813576,"Waiola Shave Ice","4bb9276f3db7b713c110229a"],[21.280828,-157.813852,"Ono Seafood Takeaway","4b902633f964a5209d7833e3"],[21.279021,-157.813692,"Kozo Sushi","4bc7e89b8b7c9c742d6d37cf"],[21.281363,-157.814347,"Pizza Hut","4b9f1fe0f964a520b51437e3"],[21.278881,-157.813688,"Tenkaippin Hawaii","4b058656f964a520605d22e3"],[21.277838,-157.81381999999996,"Irifune Restaurant","4b071fa2f964a520b2f722e3"],[21.27691,-157.814208,"Sunrise Restaurant","4c1da836fcf8c9b6853aac0b"]],map,googname;ko.applyBindings(new neighborhoodMapViewModel);